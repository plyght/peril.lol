// Shared photo utilities
async function fetchPhotos(){try{const r=await fetch('photos.json');return await r.json()}catch(e){console.error('Failed to fetch photos:',e);throw e}}function generatePhotoInfoHTML(p){return`<h1>${p.title}</h1>${p.subtitle?`<p><strong>Subtitle:</strong> ${p.subtitle}</p>`:''}${p.date?`<div class="exif-info"><p><strong>Date:</strong> ${p.date}</p></div>`:''}${p.location?`<div class="exif-info"><p><strong>Location:</strong> ${p.location}</p></div>`:''}${p.camera?`<div class="exif-info"><p><strong>Camera:</strong> ${p.camera}</p></div>`:''}`}function generateLightboxInfoHTML(p){return`<h2>${p.title}</h2>${p.subtitle?`<div class="exif-info"><p><strong>Subtitle:</strong> ${p.subtitle}</p></div>`:''}${p.date?`<div class="exif-info"><p><strong>Date:</strong> ${p.date}</p></div>`:''}${p.location?`<div class="exif-info"><p><strong>Location:</strong> ${p.location}</p></div>`:''}${p.camera?`<div class="exif-info"><p><strong>Camera:</strong> ${p.camera}</p></div>`:''}`}function showError(e,m){e.innerHTML=`<p>${m}</p>`}function showLoading(e){e.innerHTML='<p>Loading...</p>'}function groupPhotosByFolder(photos){return photos.reduce((groups,photo)=>{const folder=photo.folder||'misc';if(!groups[folder])groups[folder]=[];groups[folder].push(photo);return groups},{})}function getFolders(photos){return[...new Set(photos.map(p=>p.folder||'misc'))].sort()}function filterPhotosByFolder(photos,folder){return photos.filter(p=>(p.folder||'misc')===folder)}